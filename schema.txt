SESSION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
session_id          (UUID)
title               (text)        // optional, auto-generated
current_stage       (LISTENING | UNDERSTANDING | GUIDANCE)
created_at
updated_at
is_active


MESSAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
message_id              (UUID)
session_id              (FK â†’ SESSION)
role                    (ENUM: user | ai)
content                 (text)
timestamp               (timestamp)

SESSION_SUMMARY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
session_id              (FK â†’ SESSION)
summary_text            (text)   // 2â€“3 neutral, plain-language lines
updated_at              (timestamp)

CLINICAL_SIGNAL_PROFILE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
session_id              (FK â†’ SESSION)

mental_load_level       ENUM(LOW | MODERATE | HIGH)
thought_pattern         ENUM(SCATTERED | REPETITIVE | RACING | UNSET)
emotional_tone          ENUM(FLAT | HEAVY | RESTLESS | UNSET)

self_awareness_level    ENUM(LOW | EMERGING | CLEAR)
expression_style        ENUM(BRIEF | DETAILED | FRAGMENTED)
engagement_state        ENUM(OPEN | GUARDED | AVOIDANT)

coping_orientation      ENUM(AVOIDING | ENDURING | EXPLORING | UNSET)
readiness_for_guidance  ENUM(LOW | MEDIUM | HIGH)

updated_at              (timestamp)

CLINICAL_OBSERVATION_LOG
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
observation_id          (UUID)
session_id              (FK â†’ SESSION)

mental_load_level
thought_pattern
emotional_tone
self_awareness_level
engagement_state
coping_orientation

recorded_at             (timestamp)

THERAPEUTIC_PROCESS_STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
session_id              (FK â†’ SESSION)

dominant_phase          ENUM(
                          CONTAINMENT,
                          CLARIFICATION,
                          INSIGHT_FORMING,
                          ACTION_READY
                        )

risk_level              ENUM(LOW | ELEVATED | UNKNOWN)

last_transition_reason  (text)
updated_at              (timestamp)



ğŸ”„ CHAT FLOW (STEP BY STEP)
â• New Chat

Backend creates a new SESSION

Initializes:

current_stage = LISTENING

empty summary

default clinical signals

Frontend switches to this session_id

Chat List (like GPT sidebar)

Query:

SELECT session_id, title, updated_at
FROM SESSION
ORDER BY updated_at DESC
=======
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   SESSION    â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚ session_id   â”‚
          â”‚ state        â”‚
          â”‚ created_at   â”‚
          â”‚ updated_at   â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
       contains  â”‚
      many msgs  â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   MESSAGE    â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚ message_id   â”‚
          â”‚ role         â”‚
          â”‚ content      â”‚
          â”‚ timestamp    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                 â”‚
        summarized into
                 â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  SESSION SUMMARY   â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚ emotions           â”‚
          â”‚ themes             â”‚
          â”‚ intensity          â”‚
          â”‚ trigger            â”‚
          â”‚ thought_loop       â”‚
          â”‚ behavior           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
           tracked over time
                    â”‚
                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   PROGRESS LOG     â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚ intensity          â”‚
          â”‚ themes             â”‚
          â”‚ recorded_at        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


